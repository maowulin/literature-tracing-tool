# 文献溯源工具实施清单

说明：此清单用于端到端实现与交付的步骤化跟踪。每一步均包含目标与验收标准。执行过程中将逐步更新状态。

## 阶段 A：前端与可用性（最小改动可运行）

1. 前端最小修复

   - 目标：移除所有表情符号；修复文献卡片序号；Enter 触发使用 onKeyDown；DOI 跳转到 doi.org；标题清洗（去标签+反转义）；优化句子切分（保留原标点、支持分号与换行）。
   - 验收：页面可用、样式一致；点击 Access 打开 DOI；标题无标签残留；不新增 any 类型。
2. 引用格式化器（APA/IEEE）

   - 目标：实现统一的引用字符串拼装与复制（APA 与 IEEE 两种）。
   - 验收：复制菜单出现两项；生成的字符串字段来源明确，格式正确。

## 阶段 B：后端能力与数据源接入

3. 后端 API 路由 /api/search

   - 目标：定义入参（句子数组）与出参（SentenceResult[]），用 zod 校验；先回传模拟数据确保前后端连通。
   - 验收：前端调用成功，错误处理与加载态正常。
4. 接入 Exa 检索

   - 目标：封装 exaService，Search Type=Auto、Result category=Research Paper；并发检索每个句子。
   - 验收：拿到标题/URL/作者片段/摘要片段；服务层有重试与超时控制。
5. 标题归一化与去重策略

   - 目标：优先按 DOI 去重；缺 DOI 时使用 规范化标题+第一作者+年份 近似键；标题规范化含大小写、空白与标点清洗。
   - 验收：同一文献只出现一次，标题显示一致。
6. 接入 Crossref 匹配

   - 目标：封装 crossrefService，使用 query.bibliographic 与 query.title 两路匹配，补齐作者、期刊、卷期、页码、出版商、DOI。
   - 验收：返回结构完整；提供 verified 标志；失败退避与限速措施到位。
7. 结果合并与排序

   - 目标：合并 Exa 与 Crossref，依据相关性、年份、Crossref 验证优先级排序。
   - 验收：列表稳定，排序可解释。

## 阶段 C：智能评估与增强

8. GPT-5 文献质量评估
   - 目标：evaluationService 调用模型输出相关性/可信度评分与简短理由；前端展示分数并支持按分数排序。
   - 验收：评分区间与解释统一；隐私保护只传最小必要字段。

## 阶段 D：并发、可靠性与隐私

9. 并发与可靠性

   - 目标：缓存热点查询；指数退避重试；速率限制；错误降级。
   - 验收：高并发下稳定；无雪崩；日志不含敏感信息。
10. 隐私与安全

- 目标：前端不留存用户原文；环境变量管理；不提交任何密钥。
- 验收：代码检查通过；不包含密钥与敏感数据。

## 阶段 E：联调与交付

11. 前端接入 /api/search

- 目标：替换模拟数据为真实数据；展示 Crossref 元数据与 Verified 状态；完善加载/错误提示。
- 验收：端到端跑通；视觉一致性良好。

12. 样例演示与自测

- 目标：用高温超导与医学示例验证标题一致性、引用正确性与评估客观性。
- 验收：结果可信且可解释；示例运行无异常。

13. 后续优化与文档（可选）

- 目标：性能监控、使用说明、FAQ。
- 验收：文档完整，便于扩展与维护。

## 当前状态

- A-1 前端最小修复：已完成
- A-2 引用格式化器：已完成
- B-3 后端 API：已完成
- B-4 Exa：待开始
- B-5 去重：待开始
- B-6 Crossref：待开始
- B-7 排序：待开始
- C-8 评估：待开始
- D-9 并发与可靠性：待开始
- D-10 隐私与安全：待开始
- E-11 前端接入：待开始
- E-12 演示与自测：待开始
- E-13 文档：待开始
